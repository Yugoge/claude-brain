{
  "env": {
    "REVIEW_GATE_ENABLED": "1",
    "REVIEW_GATE_COMMANDS": "/learn,/ask,/fact-check",
    "REVIEW_GATE_THRESHOLD": "1",
    "ANALYTICS_PERIOD": "90",
    "ANALYTICS_DOMAIN": "finance",
    "PLAYWRIGHT_MCP_SANDBOX": "false"
  },
  "permissions": {
    "allow": [
      "Read",
      "Glob",
      "Grep",
      "WebSearch",
      "SlashCommand",
      "Task",
      "TodoWrite",
      "Bash(source venv/bin/activate && python3 scripts/review/extract_conversation_context.py:*)",
      "Bash(scripts/learning-materials/update_progress.py:*)",
      "Bash(git status:*)",
      "Bash(git log:*)",
      "Bash(git diff:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git pull:*)",
      "Bash(git fetch:*)",
      "Bash(git show:*)",
      "Bash(git branch:*)",
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(source venv/bin/activate:*)",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(mkdir:*)",
      "Bash(touch:*)",
      "Bash(cat:*)",
      "Bash(cat > /tmp/*.json:*)",
      "Bash(cat > /tmp/*.txt:*)",
      "Bash(cat > /tmp/*.py:*)",
      "Bash(cat > /tmp/*.md:*)",
      "Bash(cargo:*)",
      "Bash(cd:*)",
      "Bash(docker images:*)",
      "Bash(docker logs:*)",
      "Bash(docker ps:*)",
      "Bash(gh auth:*)",
      "Bash(go:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(wc:*)",
      "Bash(tree:*)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(chmod:*)",
      "Bash(test:*)",
      "Bash(grep:*)",
      "Bash(awk:*)",
      "Bash(sed:*)",
      "Bash(sort:*)",
      "Bash(uniq:*)",
      "Bash(xargs:*)",
      "Bash(echo:*)",
      "Bash(date:*)",
      "Bash(md5sum:*)",
      "Bash(lsof:*)",
      "Bash(tee:*)",
      "Bash(bash:*)",
      "Bash(for:*)",
      "Bash(do)",
      "Bash(done)",
      "Bash(if:*)",
      "Bash(then)",
      "Bash(else)",
      "Bash(fi)",
      "Bash(kubectl describe:*)",
      "Bash(kubectl get:*)",
      "Bash(node:*)",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(pip:*)",
      "Bash(pip3:*)",
      "Bash(pnpm:*)",
      "Bash(pwd:*)",
      "Bash(rustc:*)",
      "Bash(which:*)",
      "Bash(yarn:*)",
      "Bash(rm -f /tmp/single_page_*.pdf:*)",
      "Bash(rm -f /tmp/*.pdf:*)",
      "Bash(rm -f /tmp/*.tmp:*)",
      "Bash(rm -f /tmp/*.json:*)",
      "Bash(rm:*)",
      "Write(learning-materials/**)",
      "Write(knowledge-base/**)",
      "Write(.review/**)",
      "Write(chats/**)",
      "Write(docs/**)",
      "Write(scripts/**)",
      "Write(/tmp/**)",
      "Edit(learning-materials/**)",
      "Edit(knowledge-base/**)",
      "Edit(.review/**)",
      "Edit(scripts/**)",
      "Edit(docs/**)",
      "Read(//root/**)",
      "Read(//tmp/**)",
      "mcp__memory-server__read_graph",
      "mcp__memory-server__create_entities",
      "mcp__memory-server__search_nodes",
      "mcp__memory-server__delete_entities",
      "mcp__memory-server__create_relations",
      "mcp__memory-server__add_observations",
      "mcp__memory-server__delete_observations",
      "mcp__memory-server__delete_relations",
      "mcp__memory-server__open_nodes",
      "mcp__happy__change_title",
      "mcp__playwright__*"
    ],
    "deny": [
      "Bash(rm -rf /:*)",
      "Bash(sudo:*)",
      "Bash(shutdown:*)",
      "Read(.env*)",
      "Write(.env*)",
      "Bash(git push --force:*)",
      "Bash(git push -f:*)"
    ],
    "ask": [
      "Bash(pip install:*)",
      "Bash(pip3 install:*)",
      "Bash(rm -rf:*)",
      "Write(.claude/**)",
      "Edit(.claude/**)",
      "Write(*.py)",
      "Edit(*.py)"
    ]
  },
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-session-start.py",
            "on_error": "ignore"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-safety-check-user-input.py",
            "stdin_json": true,
            "on_error": "warn"
          },
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-review-reminder.py",
            "on_error": "ignore"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "SlashCommand",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-pre-command-review-check.py",
            "stdin_json": true,
            "on_error": "warn"
          },
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-checklist-injection.py",
            "stdin_json": true,
            "on_error": "warn"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-subagent-checklist.py",
            "stdin_json": true,
            "on_error": "warn"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-safety-check-bash.py",
            "stdin_json": true,
            "on_error": "warn"
          },
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-detect-inline-python.py",
            "stdin_json": true,
            "on_error": "warn"
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-protect-index-files.py",
            "stdin_json": true,
            "on_error": "warn"
          }
        ]
      },
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-check-read-size.py",
            "stdin_json": true,
            "on_error": "warn"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-record-review-master-call.py",
            "stdin_json": true,
            "on_error": "ignore"
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-trigger-backlink-rebuild.py",
            "stdin_json": true,
            "on_error": "ignore"
          }
        ]
      },
      {
        "matcher": "Write|Edit|NotebookEdit",
        "hooks": [
          {
            "type": "command",
            "command": "bash ~/.claude/hooks/smart-checkpoint.sh",
            "on_error": "ignore"
          }
        ]
      },
      {
        "matcher": "mcp__memory-server__.*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-memory-health.py",
            "stdin_json": true,
            "on_error": "ignore"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-log-review-completion.py",
            "stdin_json": true,
            "on_error": "ignore"
          },
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-learn-finalization-prompt.py",
            "stdin_json": true,
            "on_error": "ignore"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": []
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$CLAUDE_PROJECT_DIR\"/scripts/hooks/hook-session-stop.py",
            "stdin_json": true,
            "on_error": "ignore"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo \"$(date -u +%Y-%m-%dT%H:%M:%SZ) SessionEnd\" >> ~/.claude/session.log",
            "on_error": "ignore"
          }
        ]
      }
    ]
  }
}
